{"version":3,"file":"js/405.09cbc7a9.js","mappings":"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","sources":["webpack://store/./src/views/CartPage.vue","webpack://store/./src/views/CartPage.vue?115c"],"sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n    <h1>Корзина</h1>\r\n    \r\n    <!-- Список товаров в корзине -->\r\n    <a-list bordered :data-source=\"cart\">\r\n      <template #renderItem=\"{ item }\">\r\n        <a-list-item>\r\n          <a-list-item-meta\r\n            :title=\"item.name\"\r\n            :description=\"item.description\"\r\n          />\r\n          <div>\r\n            <strong>{{ item.price }} ₽</strong>\r\n            <a-button\r\n              danger\r\n              size=\"small\"\r\n              @click=\"removeItem(item.id)\"\r\n              style=\"margin-left: 16px\"\r\n            >\r\n              Удалить\r\n            </a-button>\r\n          </div>\r\n        </a-list-item>\r\n      </template>\r\n    </a-list>\r\n\r\n    <!-- Информация о сумме и кнопке оформления заказа -->\r\n    <div v-if=\"cart.length\" class=\"total\">\r\n      <p>Итого: <strong>{{ total }} ₽</strong></p>\r\n      <a-button type=\"primary\" size=\"large\" @click=\"checkout\">\r\n        Оформить заказ\r\n      </a-button>\r\n    </div>\r\n    <p v-else>Корзина пуста.</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CartPage',\r\n  data() {\r\n    return {\r\n      cart: []  // Массив товаров из корзины\r\n    }\r\n  },\r\n  computed: {\r\n    total() {\r\n      // Сумма всех товаров в корзине\r\n      return this.cart.reduce((sum, item) => sum + item.price, 0);\r\n     \r\n    }\r\n  },\r\n  created() {\r\n    // Загружаем корзину из localStorage при создании компонента\r\n    const savedCart = localStorage.getItem('cart');\r\n    if (savedCart) {\r\n      this.cart = JSON.parse(savedCart);\r\n    }\r\n  },\r\n  methods: {\r\n    // Метод для удаления товара из корзины\r\n    removeItem(id) {\r\n      this.cart = this.cart.filter(item => item.id !== id);\r\n      localStorage.setItem('cart', JSON.stringify(this.cart));  // Обновляем localStorage\r\n      this.$message.info('Товар удалён из корзины');\r\n    },\r\n    \r\n    // Метод для оформления заказа\r\n    async checkout() {\r\n      // Проверяем, есть ли товары в корзине\r\n      if (this.cart.length === 0) {\r\n        this.$message.warning('Корзина пуста!');\r\n        return;\r\n      }\r\n\r\n      // Отправляем заказ на сервер\r\n      const orderData = {\r\n        items: this.cart,  // Все товары из корзины\r\n        total: this.total   // Сумма заказа\r\n      };\r\n\r\n      console.log('Отправка заказа:', orderData);\r\n\r\n      try {\r\n        // Отправка POST-запроса на сервер\r\n        const response = await fetch('http://localhost:5000/api/order', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(orderData),  // Преобразуем данные в JSON\r\n        });\r\n\r\n        const data = await response.json();  // Преобразуем ответ от сервера в JSON\r\n\r\n        if (data.success) {\r\n          this.$message.success(`✅ Заказ оформлен! Сумма: ${this.total} ₽`);\r\n          this.cart = [];  // Очищаем корзину\r\n          localStorage.removeItem('cart');  // Удаляем корзину из localStorage\r\n        } else {\r\n          this.$message.error('Ошибка оформления заказа. Попробуйте снова.');\r\n        }\r\n      } catch (error) {\r\n        this.$message.error('Ошибка при отправке заказа. Попробуйте позже.');\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cart {\r\n  padding: 40px;\r\n}\r\n\r\n.total {\r\n  margin-top: 24px;\r\n  text-align: right;\r\n}\r\n</style>\r\n\r\n","import { render } from \"./CartPage.vue?vue&type=template&id=3faec763&scoped=true\"\nimport script from \"./CartPage.vue?vue&type=script&lang=js\"\nexport * from \"./CartPage.vue?vue&type=script&lang=js\"\n\nimport \"./CartPage.vue?vue&type=style&index=0&id=3faec763&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3faec763\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_a_list","bordered","$data","cart","renderItem","_withCtx","item","_component_a_list_item","default","_component_a_list_item_meta","title","name","description","_toDisplayString","price","_component_a_button","danger","size","onClick","$event","$options","removeItem","id","style","_cache","_createTextVNode","_","length","_hoisted_2","total","type","checkout","_hoisted_3","data","computed","this","reduce","sum","created","savedCart","localStorage","getItem","JSON","parse","methods","filter","setItem","stringify","$message","info","warning","orderData","items","console","log","response","fetch","method","headers","body","json","success","error","__exports__","render"],"sourceRoot":""}